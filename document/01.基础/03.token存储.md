### 03.token存储
token的默认存储方式为内存存储，可实现 `SessionManager` 接口进行定制。
```java
    @Bean
    public SessionManager sessionManager(){
        // 这是默认的存储方式，可定制
        return new DefaultFinalSessionManager();
    }
```

### 存储在 Redis
final-security实现了一个默认的实现类 `FinalRedisSessionManager` 可bean注入即可。
```java
    @Autowired
    private RedisTemplate redisTemplate;

    @Bean
    public SessionManager sessionManager() {
        // 将key序列化为string
        // redisTemplate.setKeySerializer(new StringRedisSerializer());
        return new FinalRedisSessionManager(redisTemplate);
    }
```
> 适合分布式会话

### 存储在数据库
存储在数据库需要自行实现`SessionManager` 接口，默认了mysql的实现类，需要添加spring-boot-data-jdbc依赖
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jdbc</artifactId>
</dependency>
```
数据库脚本
```sql
CREATE TABLE `fs_store`
(
    `token`          varchar(64) NOT NULL,
    `id`          varchar(64) NOT NULL,
    `final_session`     blob,
    `role`        varchar(1024),
    `permission`  varchar(1024),
    `update_time` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
    `create_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```
<br/><br/><br/>
> final-security 一如既往简洁、简单、专一。